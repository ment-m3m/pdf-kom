<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- iOS PWA化 + ステータスバー色設定 -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default"> <!-- ← defaultにする -->
<meta name="theme-color" content="#0a1d4d"> <!-- Androidにも適用される -->


  <title>pdf jem</title>
  <!-- PWA manifest -->
  <link rel="manifest" href="./manifest.json">
  <!-- Materialize CSS (local) -->
  <link href="./libs/materialize.min.css" rel="stylesheet">
  <!-- Custom Styles -->
  <link href="./css/style.css" rel="stylesheet">
</head>
<body>
	<div id="background-message">
		<h5>Open your PDF files.</h5>
		<p>You can:</p>
		<ul>
			<li>Merge multiple PDFs</li>
			<li>Change page orientation</li>
			<li>Delete specific pages</li>
		</ul>
		<br>
		<h5>PDF dosyalarınızı açın.</h5>
		<p>Şunları yapabilirsiniz:</p>
		<ul>
			<li>Birden fazla PDF'yi birleştirin</li>
			<li>Sayfa yönünü değiştirin</li>
			<li>Belirli sayfaları silin</li>
		</ul>
	</div>
	
  <!-- ナビゲーション -->
	<header id="app-header">
		<div class="header-title">PDF jem</div>
	</header>
	

	


  <main class="container">
    <!-- ファイル選択 -->
		     <!-- 操作ボタン -->
<!-- 画面下部に固定で中央寄せ -->
<!-- 操作ボタン（ナビゲーションのすぐ下） -->
<div class="top-controls top-controls-fixed center-align">
<!-- タイトル下に中央配置 -->
<div class="header-download">
	<a id="download-link" class="btn accent-bg nav-download-btn round-btn waves-effect " download>
		download
	</a>
</div>
  <button id="rotate-btn" class="btn primary-bg round-btn white-text">rotate ↻</button>
  <button id="align-horz-btn" class="btn primary-bg round-btn white-text waves-effect">all ⇆</button>
  <button id="align-vert-btn" class="btn primary-bg round-btn white-text  waves-light">all ⇅</button>
	<button id="remove-checked-btn" class="btn red darken-2 white-text round-btn">del ×</button>

</div>

<div id="update-message" style="display:none; position:fixed; bottom:10px; width:100%; background:#fffae6; color:#000; padding:10px; text-align:center; z-index:999;">
  New feature added! Please reload.<button onclick="location.reload()">reload</button>
</div>


<!-- 1. add pdf を下に -->
<input type="file" id="file-input" accept="application/pdf" multiple hidden>
<label for="file-input" class="btn nav-download-btn bottom-addpdf-btn  waves-effect">open pdf</label>

<!-- 2. + をその上に -->
<input type="file" id="file-add-input" accept="application/pdf" multiple hidden>
<label for="file-add-input" class="btn nav-download-btn bottom-plus-btn wide-plus waves-effect">＋</label>





    <!-- 出力リンク -->

				 <!-- PDF プレビュー表示エリア -->
				 <div class="row" id="pdf-preview-area"></div>

  </main>
<!-- index.html の </body> 前に追加 -->
<script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/plugins/multi-drag/SortableMultiDrag.min.js"></script>
<script>
  // プレビューエリアを Sortable で初期化
  const previewArea = document.getElementById('pdf-preview-area');
  Sortable.mount(new Sortable.MultiDrag(), new Sortable.SortablePlugin());

  Sortable.create(previewArea, {
    draggable: '.thumbnail-wrapper',
    multiDrag: true,           // 複数選択を有効化
    selectedClass: 'being-dragged', // 選択時のクラス
    fallbackOnBody: true,      // ドラッグ中の要素を body に移す
    swapThreshold: 0.65,
    onEnd: () => {
      updateIndices();         // 既存のページ番号再計算関数
      updatePageNumbers();
      if (typeof M !== 'undefined') M.toast({ html: '順番を変更しました' });
    }
  });
</script>

  <!-- Libraries -->
  <script src="./libs/pdf-lib.min.js"></script>
  <script src="./pdfjs/pdf.js"></script>
  <script>
    // PDF.js ワーカー設定
    if (window['pdfjsLib']) {
      pdfjsLib.GlobalWorkerOptions.workerSrc = 'pdfjs/pdf.worker.min.js';
    }
  </script>
  <!-- Materialize JS (local) -->
  <script src="./libs/materialize.min.js"></script>
  <!-- Main Script -->
  <script src="./js/main.js"></script>
</body>
</html>
